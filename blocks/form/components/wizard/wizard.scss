@use '../../../../styles/settings' as *;

/*****************************
    WIZARD STEPS
*****************************/

.wizard .wizard-menu-items {
  display: none !important;
}

%common-panel-spacing {
  margin: 32px 0;

  @include media('desktop') {
    padding: 60px 0;
  }
}

%common-wizard-button {
  background-position: center;
  background-size: contain;
  background-repeat: no-repeat;
  display: inline-block;
  width: 1rem;
  height: 1rem;
  vertical-align: middle;
}

.wizard {
  .current-wizard-step {
    @include media('desktop') {
      padding: $spacing-600 0;
      margin: 32px auto;
      width: 100%;
      max-width: 1038px;
    }
  }

  > legend.field-label,
  .wizard-menu-items {
    display: none;
  }

  .wizard-button-wrapper {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: $spacing-400;
    background-color: $color-white;
    z-index: 1000;
    display: flex;
    justify-content: space-between;
    gap: $spacing-300;
    border-top: 1px solid $stroke-secondary;

    .wizard-button-next {
      margin-left: auto;
    }

    .button[name='next'] {
      @extend %button;
      @extend %button--primary;
      display: flex;
      align-items: center;

      &::before {
        @extend %common-wizard-button;
        content: '';
        background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path fill='currentColor' d='M7.05 3.536L8.464 4.95 4.414 9H17v2H4.414l4.05 4.05-1.414 1.414L0.586 10z'/></svg>");
        margin-left: 8px;
        order: 1;
      }
    }

    .button[name='back'] {
      @extend %button;
      @extend %button--hollow;
      display: flex;
      align-items: center;

      &::before {
        @extend %common-wizard-button;
        content: '';
        background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'><path fill='currentColor' d='M12.95 3.536L11.536 4.95 15.586 9H3v2h12.586l-4.05 4.05 1.414 1.414L19.414 10z'/></svg>");
        margin-right: 8px;
      }
    }
  }

  .wizard-menu-items {
    display: flex;
    gap: 50px;
    flex-wrap: wrap;
    list-style: none;
    padding: 0;
    margin: 0;
    font-weight: var(--form-fieldset-legend-font-weight);
    font-size: var(--form-fieldset-legend-font-size);
    color: var(--form-fieldset-legend-color);
    padding-bottom: var(--form-wizard-padding);
    grid-column: span 12;
  }

  .wizard-menu-item {
    counter-increment: wizard-step-counter;

    &::before {
      content: counter(wizard-step-counter);
      border: 2px solid var(--form-wizard-number-color);
      color: var(--form-wizard-number-color);
      border-radius: 50%;
      width: 35px;
      height: 35px;
      margin-right: 10px;
      text-align: center;
      line-height: 2;
      display: inline-block;
    }
  }

  .wizard-menu-active-item::before {
    border: 2px solid var(--form-wizard-number-color);
    background: var(--form-wizard-number-color);
    color: var(--background-color-primary);
    font-weight: 600;
  }

  &.left {
    display: flex;

    .wizard-menu-items {
      flex-direction: column;
      width: 300px;
    }
  }
}

// Utility/hiding logic
main .form form .wizard > fieldset > legend {
  display: none;
}

main .form form .wizard > fieldset:not(.current-wizard-step) {
  display: none;
}

main .form form .wizard .wizard-button-wrapper .field-wrapper {
  flex: unset;
}

main form .wizard > .current-wizard-step.panel-wrapper:first-of-type ~ .wizard-button-wrapper > .wizard-button-prev,
main form .wizard > .current-wizard-step.panel-wrapper:last-of-type ~ .wizard-button-wrapper > .wizard-button-next {
  display: none;
}
